<!DOCTYPE html>
<html lang='en'>
  <head>
    <meta charset='utf-8' />
    <title>Points on a map</title>
    <meta name='viewport' content='width=device-width, initial-scale=1' />
    <script src='https://api.tiles.mapbox.com/mapbox-gl-js/v2.5.1/mapbox-gl.js'></script>
    <link href='https://api.tiles.mapbox.com/mapbox-gl-js/v2.5.1/mapbox-gl.css' rel='stylesheet' />
    <style>
      body {
        margin: 0;
        padding: 0;
      }
      #map {
        position: absolute;
        top: 0;
        bottom: 0;
        width: 100%;
      }
    </style>
  </head>
  <body>
    <div id='map'></div>
    <script>
    // The value for 'accessToken' begins with 'pk...'
    mapboxgl.accessToken = 'pk.eyJ1IjoibW1hcnVuIiwiYSI6ImNrdXk2aXlsazVod2gzMXQ0d2NmeGE2ZjEifQ.F87ybHLFzlLXNn559I-0vg';
    const map = new mapboxgl.Map({
      container: 'map',
      // Replace YOUR_STYLE_URL with your style URL.
      // style: 'mapbox://styles/mmarun/ckuy71i1521rv17o2u9nk2hwv',
      style: 'mapbox://styles/mmarun/ckuy71i1521rv17o2u9nk2hwv',
      // center: [-38.885818,77.033192],
      center: [-74.0086263,40.7083107],
      zoom: 16.0

    });

    // Code from the next step will go here.
    // Add an event listener that runs
    //   when a user clicks on the map element.
    // */
    map.on('click', (event) => {
      // If the user clicked on one of your markers, get its information.
      const features = map.queryRenderedFeatures(event.point, {
        layers: ['dollar_tracking'] // replace with your layer name
      });
      if (!features.length) {
        return;
      }
      const feature = features[0];

      // Code from the next step will go here.
      /*
          Create a popup, specify its options
          and properties, and add it to the map.
        */
      const popup = new mapboxgl.Popup({ offset: [0, -15] })
        .setLngLat(feature.geometry.coordinates)
        .setHTML(
          `<h3>${feature.properties.title}</h3><p>${feature.properties.description}</p>${feature.properties.address}</p>`
        )
        .addTo(map);

//         map.on('load', () => {
//           map.addSource('trees', {
//             type: 'geojson',
//             data: './trees.geojson'
//           });
//           // add heatmap layer here
//           // add circle layer here
//         });
//
//         map.addLayer(
//     {
//       id: 'trees-heat',
//       type: 'heatmap',
//       source: 'trees',
//       maxzoom: 15,
//       paint: {
//         // increase weight as diameter breast height increases
//         'heatmap-weight': {
//           property: 'dbh',
//           type: 'exponential',
//           stops: [
//             [1, 0],
//             [62, 1]
//           ]
//         },
//         // increase intensity as zoom level increases
//         'heatmap-intensity': {
//           stops: [
//             [11, 1],
//             [15, 3]
//           ]
//         },
//         // assign color values be applied to points depending on their density
//         'heatmap-color': [
//           'interpolate',
//           ['linear'],
//           ['heatmap-density'],
//           0,
//           'rgba(236,222,239,0)',
//           0.2,
//           'rgb(208,209,230)',
//           0.4,
//           'rgb(166,189,219)',
//           0.6,
//           'rgb(103,169,207)',
//           0.8,
//           'rgb(28,144,153)'
//         ],
//         // increase radius as zoom increases
//         'heatmap-radius': {
//           stops: [
//             [11, 15],
//             [15, 20]
//           ]
//         },
//         // decrease opacity to transition into the circle layer
//         'heatmap-opacity': {
//           default: 1,
//           stops: [
//             [14, 1],
//             [15, 0]
//           ]
//         }
//       }
//     },
//     'waterway-label'
//   );
//
//   map.addLayer(
//   {
//     id: 'trees-point',
//     type: 'circle',
//     source: 'trees',
//     minzoom: 14,
//     paint: {
//       // increase the radius of the circle as the zoom level and dbh value increases
//       'circle-radius': {
//         property: 'dbh',
//         type: 'exponential',
//         stops: [
//           [{ zoom: 15, value: 1 }, 5],
//           [{ zoom: 15, value: 62 }, 10],
//           [{ zoom: 22, value: 1 }, 20],
//           [{ zoom: 22, value: 62 }, 50]
//         ]
//       },
//       'circle-color': {
//         property: 'dbh',
//         type: 'exponential',
//         stops: [
//           [0, 'rgba(236,222,239,0)'],
//           [10, 'rgb(236,222,239)'],
//           [20, 'rgb(208,209,230)'],
//           [30, 'rgb(166,189,219)'],
//           [40, 'rgb(103,169,207)'],
//           [50, 'rgb(28,144,153)'],
//           [60, 'rgb(1,108,89)']
//         ]
//       },
//       'circle-stroke-color': 'white',
//       'circle-stroke-width': 1,
//       'circle-opacity': {
//         stops: [
//           [14, 0],
//           [15, 1]
//         ]
//       }
//     }
//   },
//   'waterway-label'
// );
//

    });
    </script>
  </body>
</html>
